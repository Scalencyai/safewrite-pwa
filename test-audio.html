<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Test</title>
    <style>
        body {
            font-family: Arial;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        button {
            padding: 20px;
            font-size: 1.5rem;
            margin: 10px;
            width: calc(100% - 20px);
        }
        .log {
            background: #f0f0f0;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>üîä Audio Test</h1>
    
    <button onclick="testNative()">Test Native Android TTS</button>
    <button onclick="testWeb()">Test Web Speech API</button>
    <button onclick="testChar()">Test Character "A"</button>
    
    <h2>Log:</h2>
    <div class="log" id="log"></div>
    
    <script>
        function log(msg) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${time}] ${msg}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(msg);
        }
        
        function testNative() {
            log('üîç Testing Native Android TTS...');
            
            if (window.AndroidAudio) {
                log('‚úÖ AndroidAudio found!');
                log('isAvailable: ' + window.AndroidAudio.isAvailable());
                
                try {
                    window.AndroidAudio.speak('Hallo Test');
                    log('‚úÖ speak() called');
                } catch (e) {
                    log('‚ùå Error: ' + e.message);
                }
            } else {
                log('‚ùå AndroidAudio not found!');
                log('Available: ' + Object.keys(window).filter(k => k.includes('Android')).join(', '));
            }
        }
        
        function testWeb() {
            log('üîç Testing Web Speech API...');
            
            if ('speechSynthesis' in window) {
                log('‚úÖ Web Speech API available');
                const utterance = new SpeechSynthesisUtterance('Hallo Web Test');
                utterance.lang = 'de-DE';
                window.speechSynthesis.speak(utterance);
                log('‚úÖ speak() called');
            } else {
                log('‚ùå Web Speech API not available');
            }
        }
        
        function testChar() {
            log('üîç Testing character A...');
            testNative();
        }
        
        // Auto-check on load
        window.addEventListener('load', () => {
            log('üöÄ Page loaded');
            log('User Agent: ' + navigator.userAgent);
            
            if (window.AndroidAudio) {
                log('‚úÖ AndroidAudio detected');
            } else {
                log('‚ùå AndroidAudio NOT detected');
            }
            
            if ('speechSynthesis' in window) {
                log('‚úÖ Web Speech API detected');
            } else {
                log('‚ùå Web Speech API NOT detected');
            }
        });
    </script>
</body>
</html>
